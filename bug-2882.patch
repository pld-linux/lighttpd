From 24886e58e141ff51b5efc3cdc2e8293e54c31037 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Elan=20Ruusam=C3=A4e?= <glen@pld-linux.org>
Date: Fri, 20 Apr 2018 15:01:19 +0300
Subject: [PATCH] fcgi: process fastcgi.balance option

refs: https://redmine.lighttpd.net/issues/2882
---
 src/mod_fastcgi.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/mod_fastcgi.c b/src/mod_fastcgi.c
index b442214e..988a2e50 100644
--- a/src/mod_fastcgi.c
+++ b/src/mod_fastcgi.c
@@ -463,6 +463,7 @@ static int fcgi_patch_connection(server *srv, connection *con, plugin_data *p) {
 	PATCH(exts_auth);
 	PATCH(exts_resp);
 	PATCH(debug);
+	PATCH(balance);
 	PATCH(ext_mapping);
 
 	/* skip the first, the global context */
@@ -483,6 +484,8 @@ static int fcgi_patch_connection(server *srv, connection *con, plugin_data *p) {
 				PATCH(exts_resp);
 			} else if (buffer_is_equal_string(du->key, CONST_STR_LEN("fastcgi.debug"))) {
 				PATCH(debug);
+			} else if (buffer_is_equal_string(du->key, CONST_STR_LEN("fastcgi.balance"))) {
+				PATCH(balance);
 			} else if (buffer_is_equal_string(du->key, CONST_STR_LEN("fastcgi.map-extensions"))) {
 				PATCH(ext_mapping);
 			}
-- 
2.16.2

