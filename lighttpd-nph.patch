--- lighttpd-1.3.8/src/cgi.c~	2005-01-29 01:52:32.000000000 +0200
+++ lighttpd-1.3.8/src/cgi.c	2005-02-04 03:39:06.000000000 +0200
@@ -338,6 +338,9 @@
 			size_t used = 0;
 			
 			buffer_append_string_buffer(hctx->response_header, hctx->response);
+
+			/* nph (no parsed headers) */
+			if (0 == strncmp(hctx->response_header->ptr, "HTTP/1.", 7)) in_header = 1;
 			
 			/* search for the \r\n\r\n or \n\n in the string */
 			for (c = hctx->response_header->ptr, cp = 0, used = hctx->response_header->used - 1; used; c++, cp++, used--) {
