diff -ur lighttpd-1.4.30-orig/src/connections.c lighttpd-1.4.30/src/connections.c
--- lighttpd-1.4.30-orig/src/connections.c	2012-01-30 09:21:37.665413503 +0100
+++ lighttpd-1.4.30/src/connections.c	2012-01-30 09:23:09.432936999 +0100
@@ -1360,9 +1360,7 @@
 			}
 
 			con->renegotiations = 0;
-#ifndef OPENSSL_NO_TLSEXT
 			SSL_set_app_data(con->ssl, con);
-#endif
 			SSL_set_accept_state(con->ssl);
 			con->conf.is_ssl=1;
 
